(function(){"use strict";jQuery.sap.declare("sap.ovp.app.Component");jQuery.sap.require("sap.ui.model.odata.AnnotationHelper");sap.ui.core.UIComponent.extend("sap.ovp.app.Component",{metadata:{routing:{config:{routerClass:sap.ui.core.routing.Router},targets:{},routes:[]},properties:{"cardContainerFragment":{"type":"string","defaultValue":"sap.ovp.app.CardContainer"},"dashboardLayoutUtil":{"type":"sap.ovp.ui.DashboardLayoutUtil"}},version:"1.42.9",library:"sap.ovp.app",dependencies:{libs:["sap.m","sap.ui.comp","sap.uxap"],components:[]},config:{fullWidth:true,hideLightBackground:true}},_addModelsMeasurements:function(){var m=this.oModels;var M,s;for(s in m){M=this.getModel(s);if(M.getMetaModel()){this._addModelMeasurements(M,s);}}},_addModelMeasurements:function(m,M){var i="ovp:ModelLoading-"+M;var I="ovp:ModelBatchCall-"+M+":";jQuery.sap.measure.start(i,"Component createContent -> MetaData loaded","ovp");m.getMetaModel().loaded().then(function(){jQuery.sap.measure.end(i);});m.attachBatchRequestSent(function(e){jQuery.sap.measure.start(I+e.getParameter("ID"),"BatchRequestSent -> BatchRequestCompleted","ovp");});m.attachBatchRequestCompleted(function(e){jQuery.sap.measure.end(I+e.getParameter("ID"));});},getOvpConfig:function(){var o;var e=[];var m=this.getMetadata();while(m&&m.getComponentName()!=="sap.ovp.app"){o=m.getManifestEntry("sap.ovp");if(o){e.unshift(o);}m=m.getParent();}e.unshift({});e.unshift(true);o=jQuery.extend.apply(jQuery,e);return o;},createXMLView:function(o){jQuery.sap.measure.start("ovp:AppCreateContent","OVP app Component createContent","ovp");this._addModelsMeasurements();this.getRouter().initialize();var a=this.getMetadata().getManifestEntry("sap.app");var u=this.getMetadata().getManifestEntry("sap.ui");var i=jQuery.sap.getObject("icons.icon",undefined,u);var c=this.getMetadata().getComponentName();o.baseUrl=jQuery.sap.getModulePath(c);if(o.smartVariantRequired===undefined||o.smartVariantRequired===null){o.smartVariantRequired=true;}if(o.enableLiveFilter===undefined||o.enableLiveFilter===null){o.enableLiveFilter=true;}var b=new sap.ui.model.json.JSONModel(o);b.setProperty("/title",jQuery.sap.getObject("title",undefined,a));b.setProperty("/description",jQuery.sap.getObject("description",undefined,a));if(i){if(i.indexOf("sap-icon")<0&&i.charAt(0)!=='/'){i=o.baseUrl+"/"+i;}b.setProperty("/icon",i);}var C=o.cards;var d=[];var e;for(var f in C){if(C.hasOwnProperty(f)&&C[f]){e=C[f];e.id=f;d.push(e);}}d.sort(function(g,h){if(g.id<h.id){return-1;}else if(g.id>h.id){return 1;}else{return 0;}});b.setProperty("/cards",d);if(o.containerLayout&&o.containerLayout==="dashboard"){jQuery.sap.require("sap.ovp.ui.DashboardLayoutUtil");b.setProperty("/cardContainerFragment","sap.ovp.app.DashboardCardContainer");var D=new sap.ovp.ui.DashboardLayoutUtil(b);this.setDashboardLayoutUtil(D);}else{b.setProperty("/cardContainerFragment",this.getCardContainerFragment());}var v=this.createMapForValueHelpEntity(o);b.setProperty("/ValueHelpEntityMap",v);this.setModel(b,"ui");var F=this.getModel(o.globalFilterModel);this.setModel(F);var E=F.getMetaModel().getODataEntityType(F.getMetaModel().getODataEntityContainer().namespace+"."+o.globalFilterEntityType,true);var V=sap.ui.view({height:"100%",preprocessors:{xml:{bindingContexts:{ui:b.createBindingContext("/"),meta:F.getMetaModel().createBindingContext(E)},models:{ui:b,meta:F.getMetaModel()}}},type:sap.ui.core.mvc.ViewType.XML,viewName:"sap.ovp.app.Main"});jQuery.sap.measure.end("ovp:AppCreateContent");return V;},setContainer:function(){var o=this.getOvpConfig();var f=this.getModel(o.globalFilterModel);sap.ui.core.UIComponent.prototype.setContainer.apply(this,arguments);if(f){f.getMetaModel().loaded().then(function(){this.runAsOwner(function(){var v=this.createXMLView(o);this.setAggregation("rootControl",v);this.oContainer.invalidate();}.bind(this));}.bind(this));}},createMapForEntityContainer:function(e){var E={};var o=e.entitySet;for(var i=0;i<o.length;i++){E[o[i].name]=o[i].entityType;}return E;},createMapForValueHelpEntity:function(o){var f=this.getModel(o.globalFilterModel);var v=[];var F=f.getMetaModel().getODataEntityType(f.getMetaModel().getODataEntityContainer().namespace+"."+o.globalFilterEntityType);if(!F){return v;}var e=[];e.push(F);var c=0;var n=false;var E=this.createMapForEntityContainer(f.getMetaModel().getODataEntityContainer());if(F.navigationProperty){n=true;}while(e.length!=0){var a=e.shift();for(var i=0;i<a.property.length;i++){var p=a.property[i];if(p["com.sap.vocabularies.Common.v1.ValueList"]){v.push(E[p["com.sap.vocabularies.Common.v1.ValueList"].CollectionPath.String]);}}if(!n||!(F.navigationProperty[c])){break;}var A=f.getMetaModel().getODataAssociationEnd(F,F.navigationProperty[c].name).type;var N=f.getMetaModel().getODataEntityType(A);e.push(N);c++;}return v;}});}());
