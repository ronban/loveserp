(function(){"use strict";var H="sapMLIB sapMLIBHoverable CodeMirror-hint";var A="sapMLIB sapMLIBHoverable sapMLIBSelected CodeMirror-hint-active";var S='Select value from list...';var a='any of the following conditions is true:';var b='all of the following conditions are true:';var c="<add line>";var N="\n\u2022  \n;";var d="\u2022  ";var E="\n"+d;var f="<'string'>";var g="<number>";var D="<'dd/mm/yyyy'>";var T="<'hh:mi:ss'>";var h="<'dd/mm/yyyy hh:mi:ss'>";CodeMirror.handleEnter=function(e,i,o){var n=CodeMirror.initComplition(e,i,o);if(n){var p=n.getHints(e,n.options);if(!p){return;}var q=jQuery.map(p.list,function(r,s){if(r.text===c){return s;}});if(q.length>0){n.pick(p,q[0],"enter");}}};CodeMirror.handleColon=function(e,i,o){var n=CodeMirror.initComplition(e,i,o);if(n){var p=n.getHints(e,n.options);if(p){var q=p.list.indexOf(c);if(q>0){p.list[q]=N;n.pick(p,q);}}}};CodeMirror.closeAutoComplete=function(e,i,o){var n=e.state.completionActive;n&&n.close();};CodeMirror.showHint=function(e,i,o){var n=CodeMirror.initComplition(e,i,o);if(n){CodeMirror.signal(e,"startCompletion",e);if(n.options.async)i(e,function(p){n.showHints(p);},n.options);else return n.showHints(n.getHints(e,n.options));}};CodeMirror.initComplition=function(e,i,o){if(e.somethingSelected())return;if(i==null){if(o&&o.async)return;else i=CodeMirror.hint.auto;}if(e.state.completionActive)e.state.completionActive.close();if(e.state.completionActive&&e.state.completionActive.widget!==null)return;var n=e.state.completionActive=new C(e,i,o||{});return n;};function C(e,i,o){this.cm=e;this.getHints=i;this.options=this.buildOptions(o);this.widget=this.onClose=null;}C.prototype={setNewCursorPosition:function(e,i){var n=i.getCursor();if(e===a+N||e===N||e===b+N){n.line--;n.ch+=i.getOption("indentUnit")+2;i.setCursor(n);}if(e===d||e===E){n.ch+=i.getOption("indentUnit")+2;i.setCursor(n);}if(e==="''"){n.ch-=1;i.setCursor(n);}},handleSimpleTypesPick:function(e){switch(e){case f:e="''";break;case g:e="0";break;case D:e="'dd/mm/yyyy'";break;case T:e="'hh:mi:ss'";break;case h:e="'dd/mm/yyyy hh:mi:ss'";break;default:break;}return e;},close:function(){if(!this.active())return;this.cm.state.completionActive=null;if(this.widget)this.widget.close();if(this.onClose)this.onClose();CodeMirror.signal(this.cm,"endCompletion",this.cm);},active:function(){return this.cm.state.completionActive==this;},pick:function(e,i,n){var o=null;var s=e.list[i];var p=s.text;var q=s.completion;var r=p;if(p!==S){r=this.handleSimpleTypesPick(p);if(r!==p){q=q.replace(p,r);p=p.replace(p,r);}if(r===a||r===b){r=r+N;}if(p.trim()===c){if(n==="enter"){r=d;}else{r=E;}}if(s.hint){s.hint(this.cm,e,s);}else{var t=p.length-q.length;if(t>0){var u=this.cm.getCursor().ch-t;var v={line:0,ch:u};this.cm.replaceRange(r,v,this.cm.getCursor());}else{var w=r.replace(p,q);this.cm.replaceRange(w,this.cm.getCursor());}}CodeMirror.signal(e,"pick",r);}else{CodeMirror.signal(this.cm,"onValueListSelect");}this.setNewCursorPosition(r,this.cm);this.close();},showHints:function(e){if(!e||!e.list.length||!this.active())return this.close();if(this.options.completeSingle!=false&&e.list.length==1)this.pick(e,0);else this.showWidget(e);},showWidget:function(e){this.widget=new W(this,e);CodeMirror.signal(this.cm,"shown");var i=0,n=this,o;var p=this.options.closeCharacters||/[\s()\[\]{};:>,]/;var s=this.cm.getCursor(),q=this.cm.getLine(s.line).length;var r=window.requestAnimationFrame||function(z){return setTimeout(z,1000/60);};var t=window.cancelAnimationFrame||clearTimeout;function u(){if(o)return;o=true;n.close();n.cm.off("cursorActivity",y);if(e)CodeMirror.signal(this.cm,"close");}function v(){if(o)return;CodeMirror.signal(e,"update");if(n.options.async)n.getHints(n.cm,w,n.options);else w(n.getHints(n.cm,n.options));}function w(z){e=z;if(o)return;if(!e||!e.list.length)return u();n.widget=new W(n,e);}function x(){if(i){t(i);i=0;}}function y(){x();var z=n.cm.getCursor(),B=n.cm.getLine(z.line);if(z.line!=s.line||B.length-z.ch!=q-s.ch||z.ch<s.ch||n.cm.somethingSelected()||(z.ch&&p.test(B.charAt(z.ch-1)))){n.close();}else{i=r(v);if(n.widget)n.widget.close();}}this.cm.on("cursorActivity",y);this.onClose=u;},buildOptions:function(o){var e=this.cm.options.hintOptions;var i={};for(var p in m)i[p]=m[p];if(e)for(var p in e)if(e[p]!==undefined)i[p]=e[p];if(o)for(var p in o)if(o[p]!==undefined)i[p]=o[p];return i;}};function j(e){if(typeof e=="string")return e;else return e.text;}function k(o,e){var i={Up:function(){e.moveFocus(-1);},Down:function(){e.moveFocus(1);},PageUp:function(){e.moveFocus(-e.menuSize()+1,true);},PageDown:function(){e.moveFocus(e.menuSize()-1,true);},Home:function(){e.setFocus(0);},End:function(){e.setFocus(e.length-1);},Enter:e.pick,Esc:e.close};var n=o.customKeys?{}:i;function p(q,v){var r;if(typeof v!="string")r=function(s){return v(s,e);};else if(i.hasOwnProperty(v))r=i[v];else r=v;n[q]=r;}if(o.customKeys)for(var q in o.customKeys)if(o.customKeys.hasOwnProperty(q))p(q,o.customKeys[q]);if(o.extraKeys)for(var q in o.extraKeys)if(o.extraKeys.hasOwnProperty(q))p(q,o.extraKeys[q]);return n;}function l(e,i){while(i&&i!=e){if(i.nodeName.toUpperCase()==="LI"&&i.parentNode==e)return i;i=i.parentNode;}}function W(o,p){this.completion=o;this.data=p;var w=this,q=o.cm,r=o.options;var s=this.hints=document.createElement("ul");s.className="CodeMirror-hints";this.selectedHint=r.getDefaultSelection?r.getDefaultSelection(q,r,p):0;var u=p.list;for(var i=0;i<u.length;++i){var v=s.appendChild(document.createElement("li")),x=u[i];var y=H+(i!=this.selectedHint?"":" "+A);if(x.className!=null)y=x.className+" "+y;v.className=y;if(x.render)x.render(v,p,x);else v.appendChild(document.createTextNode(x.displayText||j(x)));v.hintId=i;}var z=q.cursorCoords(r.alignWithWord!==false?p.from:null);var B=z.left,F=z.bottom,G=true;s.style.left=B+"px";s.style.top=F+"px";var I=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);var J=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(r.container||document.body).appendChild(s);var K=s.getBoundingClientRect();var L=K.right-I,M=K.bottom-J;if(L>0){if(K.right-K.left>I){s.style.width=(I-5)+"px";L-=(K.right-K.left)-I;}s.style.left=(B=z.left-L)+"px";}if(M>0){var O=K.bottom-K.top;if(K.top-(z.bottom-z.top)-O>0){M=O+(z.bottom-z.top);G=false;}else if(O>J){s.style.height=(J-5)+"px";M-=O-J;}s.style.top=(F=z.bottom-M)+"px";}q.addKeyMap(this.keyMap=k(r,{moveFocus:function(n,e){w.changeActive(w.selectedHint+n,e);},setFocus:function(n){w.changeActive(n);},menuSize:function(){return w.screenAmount();},length:u.length,close:function(){o.close();},pick:function(){w.pick();}}));if(r.closeOnUnfocus!==false){var P;q.on("blur",this.onBlur=function(){P=setTimeout(function(){o.close();},100);});q.on("focus",this.onFocus=function(){clearTimeout(P);});}var Q=q.getScrollInfo();q.on("scroll",this.onScroll=function(){var e=q.getScrollInfo(),n=q.getWrapperElement().getBoundingClientRect();var t=F+Q.top-e.top;var R=t-(window.pageYOffset||(document.documentElement||document.body).scrollTop);if(!G)R+=s.offsetHeight;if(R<=n.top||R>=n.bottom)return o.close();s.style.top=t+"px";s.style.left=(B+Q.left-e.left)+"px";});CodeMirror.on(s,"click",function(e){var t=l(s,e.target||e.srcElement);if(t&&t.hintId!=null){w.changeActive(t.hintId);w.pick();}});CodeMirror.on(s,"mousedown",function(){q.options.shouldValidate=false;setTimeout(function(){q.focus();},20);});CodeMirror.signal(p,"select",u[0],s.firstChild);return true;}W.prototype={close:function(){if(this.completion.widget!=this)return;this.completion.widget=null;this.hints.parentNode.removeChild(this.hints);this.completion.cm.removeKeyMap(this.keyMap);var e=this.completion.cm;if(this.completion.options.closeOnUnfocus!==false){e.off("blur",this.onBlur);e.off("focus",this.onFocus);}e.off("scroll",this.onScroll);},pick:function(){this.completion.pick(this.data,this.selectedHint);},changeActive:function(i,e){if(i>=this.data.list.length)i=e?this.data.list.length-1:0;else if(i<0)i=e?0:this.data.list.length-1;if(this.selectedHint==i)return;var n=this.hints.childNodes[this.selectedHint];n.className=n.className.replace(" "+A,"");n=this.hints.childNodes[this.selectedHint=i];n.className+=" "+A;if(n.offsetTop<this.hints.scrollTop)this.hints.scrollTop=n.offsetTop-3;else if(n.offsetTop+n.offsetHeight>this.hints.scrollTop+this.hints.clientHeight)this.hints.scrollTop=n.offsetTop+n.offsetHeight-this.hints.clientHeight+3;CodeMirror.signal(this.data,"select",this.data.list[this.selectedHint],n);},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1;}};CodeMirror.registerHelper("hint","auto",function(e,o){var n=e.getHelpers(e.getCursor(),"hint");if(n.length){for(var i=0;i<n.length;i++){var p=n[i](e,o);if(p&&p.list.length)return p;}}else{var w=e.getHelper(e.getCursor(),"hintWords");if(w)return CodeMirror.hint.fromList(e,{words:w});}});CodeMirror.registerHelper("hint","fromList",function(e,o){var n=e.getCursor(),t=e.getTokenAt(n);var p=[];for(var i=0;i<o.words.length;i++){var w=o.words[i];if(w.slice(0,t.string.length)==t.string)p.push(w);}if(p.length)return{list:p,from:CodeMirror.Pos(n.line,t.start),to:CodeMirror.Pos(n.line,t.end)};});var m={hint:CodeMirror.hint.auto,completeSingle:false,alignWithWord:true,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:true,completeOnSingleClick:false,container:null,customKeys:null,extraKeys:null};CodeMirror.commands.autocomplete=CodeMirror.showHint;CodeMirror.commands.enterAutocomplete=CodeMirror.handleEnter;CodeMirror.commands.colonAutocomplete=CodeMirror.handleColon;CodeMirror.commands.closeAutoComplete=CodeMirror.closeAutoComplete;})();
