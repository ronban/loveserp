/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['sap/ui/rta/command/BaseCommand',"sap/ui/fl/FlexControllerFactory","sap/ui/fl/changeHandler/JsControlTreeModifier","sap/ui/fl/Utils"],function(B,F,J,U){"use strict";var a=B.extend("sap.ui.rta.command.FlexCommand",{metadata:{library:"sap.ui.rta",properties:{changeHandler:{type:"object"},changeType:{type:"string"}},associations:{},events:{}}});a.FORWARD=true;a.BACKWARD=false;a.prototype.getPreparedActionData=function(f){f=(f===a.FORWARD||f===a.BACKWARD)?f:true;if(f){return this._forwardPreparedActionData;}else{return this._backwardPreparedActionData;}};a.prototype.prepareActionData=function(){this._forwardPreparedActionData=this._getForwardActionData(this._getElement());this._backwardPreparedActionData=this._getBackwardActionData(this._getElement());};a.prototype._executeWithElement=function(e){var c=this._getForwardActionData(e);this._applyChange(c);};a.prototype._getForwardActionData=function(e){return{change:this._completeChangeContent({changeType:this.getChangeType(),selector:{id:this._getElement().getId()}}),selectorElement:this._getElement()};};a.prototype._getBackwardActionData=function(e){};a.prototype._undoWithElement=function(e){var p=this.getPreparedActionData(a.BACKWARD);if(p){this._applyChange(p);}else{jQuery.log.warning("Undo functionality not supported for element with id "+e.getId());}};a.prototype._completeChangeContent=function(s){var f=F.createForControl(this.getElement());return f.createChange(s,this.getElement());};a.prototype._applyChange=function(c){var C=c.change||c;var A=U.getAppComponentForControl(this.getElement());var s=J.bySelector(C.getSelector(),A);this.getChangeHandler().applyChange(C,s,{modifier:J,appComponent:A});};return a;},true);
