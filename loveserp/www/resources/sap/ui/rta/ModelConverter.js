/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/comp/odata/FieldSelectorModelConverter','sap/ui/dt/ElementUtil'],function(q,F,E){"use strict";var M={};M.getConvertedModelWithBoundAndRenamedLabels=function(c,e,C){var t=this;var m=c.getModel();return this._getModelConverter(m).then(function(f){return t._getFieldModel(c,f,e,C);});};M._getModelConverter=function(m){var o=m.getMetaModel();return o.loaded().then(function(){return new F(m);},function(r){q.sap.log.error("MetadataModel could not be loaded",r);});};M._getIgnoredFields=function(c){if(c&&c.getIgnoredFields){var C=c.getIgnoredFields();if(C){var i=C.split(",");return i;}}return[];};M._getFieldModel=function(c,f,e,C){var I=this._getIgnoredFields(c);var o=f.getConvertedModel(e,I);if(!C){throw new Error("ModelConverter: no usable change controller instance found!");}var v=C.findVisibleAndBoundFieldsAndLabelNames(c);var V=v.visibleAndBoundFields;var m=v.fieldsAndLabelNames;var a=v.fieldsAndBoundPropertyName;var b=v.boundFieldsId;var s;for(var z=0;z<e.length;z++){s=e[z];for(var i=0;i<o[s].length;i++){var A=o[s][i];var d=f.getMetaDataAnalyzer()._getNameOfPropertyUsingComplexType(s,A.entityName);if(V[A.name]){A.checked=true;}A.controlId=b[A.name];if(d){A.isComplexType=true;A.complexTypeName=d;if(V[d+"/"+A.name]){A.checked=true;A.controlId=V[d+"/"+A.name];}}var g;var p;if(A.isComplexType){p=A.complexTypeName+"/"+A.name;g=m[p];A.boundProperty=a[p];}else{g=m[A.name];A.boundProperty=a[A.name];}if(g&&g!==A["sap:label"]){A.fieldLabel=g;}}}return o[s];};return M;},true);
