sap.ui.define(["sap/ui/core/ValueState","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast","sap/m/MessageBox"],function(V,F,a,M,b){"use strict";var h={badRequest:"400",unauthorized:"401",forbidden:"403",notFound:"404",methodNotAllowed:"405",preconditionFailed:"428",internalServerError:"500",notImplemented:"501",badGateway:"502",serviceUnavailable:"503",gatewayTimeout:"504",httpVersionNotSupported:"505"};var o={callAction:"callAction",addEntry:"addEntry",saveEntity:"saveEntity",deleteEntity:"deleteEntity",editEntity:"editEntity",modifyEntity:"modifyEntity",activateDraftEntity:"activateDraftEntity",saveAndPrepareDraftEntity:"saveAndPrepareDraftEntity",getCollection:"getCollection"};function g(R){var t=[],m;var f=sap.ui.getCore().getMessageManager();var j=f.getMessageModel().getData();for(var i=0;i<j.length;i++){m=j[i];if(m.getPersistent()){t.push(m);}}jQuery.noop(R);return t;}function c(P,C){var D;D=function(n,f){var i;var j={onMessageDialogClose:function(){f.onMessageDialogClose();i.destroy();}};i=sap.ui.xmlfragment(n,j);if(C){jQuery.sap.syncStyleClass(C,P,i);}P.addDependent(P);return i;};return D;}function d(m){var s,t,l;var D;var f={onMessageDialogClose:function(){D.close();r();}};if(typeof m=="function"){D=m("sap.ui.generic.app.fragments.MessageDialog",f);}else if(typeof m=="object"){D=c(m.owner,m.contentDensityClass)("sap.ui.generic.app.fragments.MessageDialog",f);}else{return;}D.setModel(sap.ui.getCore().getMessageManager().getMessageModel(),"message");var S=new sap.ui.model.json.JSONModel();D.setModel(S,"settings");var j=D.getContent()[0];l=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");S.setProperty("/closeButtonText",l.getText("DIALOG_CLOSE"));var B=j.getBinding("items");B.filter(new F("persistent",a.EQ,true));var C=B.getContexts();if(C.length===1&&C[0].getObject().type===V.Success){M.show(C[0].getObject().message,{onClose:r});}else if(C.length>0){for(var i=0;i<C.length;i++){var k=C[i].getObject();if(k.type===sap.ui.core.MessageType.Error){s=sap.ui.core.ValueState.Error;break;}if(k.type===sap.ui.core.MessageType.Warning){s=sap.ui.core.ValueState.Warning;continue;}if(k.type===sap.ui.core.MessageType.Information||k.type===sap.ui.core.MessageType.None){s=sap.ui.core.ValueState.None;continue;}s=sap.ui.core.ValueState.Success;}switch(s){case sap.ui.core.ValueState.Error:t=l.getText("ERROR_TITLE");break;case sap.ui.core.ValueState.Warning:t=l.getText("WARNING_TITLE");break;case sap.ui.core.ValueState.Success:t=l.getText("SUCCESS_TITLE");break;default:t=l.getText("INFORMATION_TITLE");break;}if(C.length>1){S.setProperty("/multiMessages",true);}else{S.setProperty("/multiMessages",false);}S.setProperty("/state",s);S.setProperty("/title",t);D.open();}}function r(){var m=sap.ui.getCore().getMessageManager();var t=g();if(t.length>0){m.removeMessages(t);}}function e(m,D,f){var t=new sap.ui.core.message.Message({message:m,description:D,type:sap.ui.core.MessageType.Error,processor:f,target:'',persistent:true});sap.ui.getCore().getMessageManager().addMessages(t);}function p(E){var R;var m=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ERROR_UNKNOWN");var H;if(E instanceof Error){if(E.message){m=E.message;}}else if(E.response){if(E.response.message){m=E.response.message;}if(E.response.statusCode){H=E.response.statusCode;}if(E.response.headers){for(var s in E.response.headers){if(s.toLowerCase()==="content-type"){var f=E.response.headers[s];if(f.toLowerCase().indexOf("application/json")===0){if(E.response.responseText){var O=JSON.parse(E.response.responseText);if(O&&O.error&&O.error.message&&O.error.message.value){m=O.error.message.value;}}}else{if(E.message){m=E.message;}}break;}}}}var t=g(E);R={httpStatusCode:H,messageText:m,description:null,containsTransientMessage:(t.length===0)?false:true};return R;}return{operations:o,httpStatusCodes:h,handleTransientMessages:d,removeTransientMessages:r,addTransientErrorMessage:e,parseErrorResponse:p};},true);
